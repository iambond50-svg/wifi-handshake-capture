<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiFi Handshake Capture</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <!-- 头部 -->
        <header class="header">
            <div class="logo">
                <svg viewBox="0 0 24 24" class="wifi-icon">
                    <path d="M12 21l-1.5-1.5c-3.5-3.5-3.5-9.2 0-12.7l1.5-1.5 1.5 1.5c3.5 3.5 3.5 9.2 0 12.7L12 21z"/>
                    <path d="M12 3C7.03 3 3 7.03 3 12c0 2.76 1.12 5.26 2.93 7.07l1.41-1.41C5.89 16.21 5 14.21 5 12c0-3.87 3.13-7 7-7s7 3.13 7 7c0 2.21-.89 4.21-2.34 5.66l1.41 1.41C19.88 17.26 21 14.76 21 12c0-4.97-4.03-9-9-9z"/>
                </svg>
                <h1>WiFi Handshake Capture</h1>
            </div>
            <div class="status-bar">
                <span class="status-item" id="interface-status">
                    <span class="dot"></span>
                    <span>接口: --</span>
                </span>
                <span class="status-item" id="scan-status">
                    <span class="dot"></span>
                    <span>空闲</span>
                </span>
            </div>
        </header>

        <!-- 控制面板 -->
        <section class="control-panel">
            <div class="control-group">
                <button class="btn btn-primary" id="btn-scan" onclick="startScan()">
                    <svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                    扫描网络
                </button>
                <button class="btn btn-danger" id="btn-stop-scan" onclick="stopScan()" disabled>
                    <svg viewBox="0 0 24 24"><path d="M6 6h12v12H6z"/></svg>
                    停止扫描
                </button>
            </div>
            <div class="scan-progress" id="scan-progress" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <span class="progress-text" id="progress-text">扫描中...</span>
            </div>
        </section>

        <!-- 主内容区 -->
        <main class="main-content">
            <!-- WiFi 列表 -->
            <section class="wifi-list-section">
                <div class="section-header">
                    <h2>
                        <svg viewBox="0 0 24 24"><path d="M1 9l2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9zm8 8l3 3 3-3c-1.65-1.66-4.34-1.66-6 0zm-4-4l2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13z"/></svg>
                        发现的网络
                        <span class="badge" id="network-count">0</span>
                    </h2>
                    <div class="filter-group">
                        <select id="filter-encryption" onchange="filterNetworks()">
                            <option value="all">所有加密类型</option>
                            <option value="WPA2">WPA2</option>
                            <option value="WPA">WPA</option>
                            <option value="WEP">WEP</option>
                            <option value="OPN">开放</option>
                        </select>
                    </div>
                </div>
                <div class="wifi-list" id="wifi-list">
                    <div class="empty-state">
                        <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                        <p>点击"扫描网络"开始发现周围的 WiFi</p>
                    </div>
                </div>
            </section>

            <!-- 侧边栏 -->
            <aside class="sidebar">
                <!-- 当前捕获状态 -->
                <section class="capture-status" id="capture-section" style="display: none;">
                    <h3>
                        <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"/></svg>
                        正在捕获
                    </h3>
                    <div class="capture-info">
                        <div class="target-network">
                            <span class="label">目标:</span>
                            <span class="value" id="capture-essid">--</span>
                        </div>
                        <div class="target-bssid">
                            <span class="label">BSSID:</span>
                            <span class="value" id="capture-bssid">--</span>
                        </div>
                        <div class="capture-timer">
                            <span class="label">时长:</span>
                            <span class="value" id="capture-time">00:00</span>
                        </div>
                        <div class="attack-status">
                            <span class="label">攻击:</span>
                            <span class="value" id="attack-status">等待中</span>
                        </div>
                        <div class="handshake-status">
                            <span class="label">握手包:</span>
                            <span class="value" id="handshake-status">等待中...</span>
                        </div>
                    </div>
                    <div class="capture-actions">
                        <button class="btn btn-danger" onclick="stopCapture()">
                            <svg viewBox="0 0 24 24"><path d="M6 6h12v12H6z"/></svg>
                            停止捕获
                        </button>
                    </div>
                </section>

                <!-- 已捕获列表 -->
                <section class="captures-list">
                    <div class="section-header-small">
                        <h3>
                            <svg viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                            已捕获的握手包
                            <span class="badge" id="capture-count">0</span>
                        </h3>
                        <button class="btn-icon" onclick="cleanupFiles()" title="清理旧文件">
                            <svg viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
                        </button>
                    </div>
                    <div class="capture-files" id="capture-files">
                        <div class="empty-state small">
                            <p>暂无捕获文件</p>
                        </div>
                    </div>
                </section>
            </aside>
        </main>

        <!-- 底部提示 -->
        <footer class="footer">
            <p>⚠️ 本工具仅限用于测试自己拥有或已获得授权的网络</p>
        </footer>
    </div>

    <!-- 通知容器 -->
    <div class="notification-container" id="notifications"></div>

    <!-- 模态框 -->
    <div class="modal" id="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">确认</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modal-body"></div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">取消</button>
                <button class="btn btn-primary" id="modal-confirm">确认</button>
            </div>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>
